<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackthebox   Academy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
<style>
    :root {
        --bg-primary: #0a0a0f;
        --bg-secondary: #12121a;
        --bg-code: #1a1a24;
        --accent: #00ff88;
        --accent-dim: #00cc6a;
        --text: #e4e4e7;
        --text-dim: #a1a1aa;
        --border: #27272a;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
        font-family: 'Segoe UI', system-ui, sans-serif;
        background: var(--bg-primary);
        color: var(--text);
        line-height: 1.8;
        padding: 40px 20px;
        max-width: 900px;
        margin: 0 auto;
    }
    
    .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: var(--accent);
        text-decoration: none;
        font-size: 0.875rem;
        margin-bottom: 32px;
        padding: 8px 16px;
        background: var(--bg-secondary);
        border-radius: 8px;
        border: 1px solid var(--border);
        transition: all 0.3s;
    }
    
    .back-link:hover {
        background: var(--bg-code);
        border-color: var(--accent);
    }
    
    h1 {
        font-size: 2.5rem;
        margin-bottom: 16px;
        color: var(--text);
        border-bottom: 2px solid var(--accent);
        padding-bottom: 16px;
    }
    
    h2 {
        font-size: 1.75rem;
        margin: 48px 0 16px;
        color: var(--text);
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    h2::before {
        content: '##';
        color: var(--accent);
        font-family: monospace;
        font-size: 1rem;
    }
    
    h3 {
        font-size: 1.25rem;
        margin: 32px 0 12px;
        color: var(--text-dim);
    }
    
    p { margin-bottom: 16px; }
    
    a {
        color: var(--accent);
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: border-color 0.3s;
    }
    
    a:hover { border-bottom-color: var(--accent); }
    
    img {
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        margin: 24px 0;
        border: 1px solid var(--border);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }
    
    code {
        font-family: 'JetBrains Mono', 'Fira Code', monospace;
        background: var(--bg-code);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.9em;
        color: var(--accent);
        border: 1px solid var(--border);
    }
    
    pre {
        background: var(--bg-secondary);
        padding: 20px;
        border-radius: 12px;
        overflow-x: auto;
        margin: 24px 0;
        border: 1px solid var(--border);
        position: relative;
    }
    
    pre::before {
        content: 'terminal';
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 0.75rem;
        color: var(--text-dim);
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    pre code {
        background: none;
        padding: 0;
        border: none;
        color: var(--text);
    }
    
    blockquote {
        border-left: 3px solid var(--accent);
        padding-left: 20px;
        margin: 24px 0;
        color: var(--text-dim);
        font-style: italic;
    }
    
    ul, ol {
        margin: 16px 0 16px 24px;
    }
    
    li {
        margin-bottom: 8px;
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 24px 0;
    }
    
    th, td {
        padding: 12px 16px;
        text-align: left;
        border: 1px solid var(--border);
    }
    
    th {
        background: var(--bg-secondary);
        color: var(--accent);
        font-weight: 600;
    }
    
    tr:nth-child(even) { background: var(--bg-secondary); }
    
    hr {
        border: none;
        height: 1px;
        background: var(--border);
        margin: 40px 0;
    }
    
    .meta {
        display: flex;
        gap: 24px;
        margin-bottom: 32px;
        padding: 16px;
        background: var(--bg-secondary);
        border-radius: 8px;
        font-size: 0.875rem;
        color: var(--text-dim);
    }
    
    .meta-item {
        display: flex;
        align-items: center;
        gap: 6px;
    }
</style>

</head>
<body>
    <a href="../../index.html" class="back-link">‚Üê Back to Index</a>
    <div class="meta">
        <span class="meta-item">üìÖ Updated: 2025-12-24</span>
        <span class="meta-item">üìÇ HTB-Academy</span>
    </div>
    <article>
        <p>Hi everyone, in this article I would like to analyze <code>Academy</code> from <code>HackTheBox</code> platform.</p>

<p><img src="./images/1.png" alt="1.png" /></p>

<p>Before I begin, let's attach our ip address to customized domain name -></p>

<p><code>nano /etc/hosts</code></p>

<p><img src="./images/2.png" alt="2.png" /></p>

<h2>Reconnaissance</h2>

<p>I wanted to conduct <code>nmap</code> scan &amp; <code>whatweb</code> enumeration seperately to identify whether there is application or not. Plus if there is application, I iterate the <code>whatweb</code> scan twice.</p>

<p><strong>Full-Scope Faster Scan</strong>:
<code>sudo nmap -sV -sC -T4 -p- academy.htb</code></p>

<p><strong>Lightweight Version Scan</strong>:
<code>sudo nmap -sV -Pn --script=vuln academy.htb</code></p>

<p><strong>Rustscan</strong>:
<code>rustscan -a academy.thm</code></p>

<p>Duration was longer than I expected on <code>nmap</code> scans.</p>

<p><img src="./images/3.png" alt="3.png" /></p>

<p>Due to my VPN, <strong>EU VIP4</strong> I got high ping responses -></p>

<p><img src="./images/4.png" alt="4.png" /></p>

<p>Finally, I was ready to see <strong>port scan</strong> &amp; <strong>whatweb</strong> results -></p>

<p><strong>Whatweb</strong> returned such result -></p>

<p><img src="./images/11.png" alt="11.png" /></p>

<p>We have application running on port <code>80</code> -></p>

<p><img src="./images/5.png" alt="5.png" /></p>

<p>Nmap results -></p>

<p><img src="./images/6.png" alt="6.png" /></p>

<p>I was able to retrieve juicy endpoints while <code>nmap</code> was conducting <code>NSE vuln</code> ->
<img src="./images/7.png" alt="7.png" /></p>

<p>Moreover, versions include a lot of CVE exploits on <strong>SSH</strong> and <strong>Apache 2.4.41</strong> according to scan results. Having direct endpoints via <code>HTTP enum</code> resulted in efficient time management.</p>

<p>How to interact with <strong>HTTP</strong> on browsers ?</p>

<p>As all you know, giving URI format is a daily basis method to interact with HTTP protocol -></p>

<p><img src="./images/9.png" alt="9.png" /></p>

<p>On the other hand, simply appending on last sequence to domain <code>:80</code> is also useful method -></p>

<p><img src="./images/8.png" alt="8.png" /></p>

<p>During the registration process to the web application, I was also conducting fuzzing on background -></p>

<p><img src="./images/10.png" alt="10.png" /></p>

<p>I used <strong>dirsearch</strong> + <strong>gobuster</strong> combination to pass fuzzing phase so as to examine each endpoint rapidly.</p>

<p><strong>Dirsearch</strong> -></p>

<p><img src="./images/12.png" alt="12.png" /></p>

<p><strong>Gobuster</strong> -></p>

<p><img src="./images/13.png" alt="13.png" /></p>

<p>After a couple of attempts in the application, I did not get move further then I started to analyze every packet with <code>Burpsuite</code>.</p>

<h2>Exploitation</h2>

<p>There was a form retrieving username:password combination from user -></p>

<p><img src="./images/14.png" alt="14.png" /></p>

<p>After I created my first account, except the vulnerable <strong>SSH</strong> and <strong>Apache</strong> version, I did not see anything vulnerable on the application. Then I decided to register as normal user.</p>

<p>When I capture the <code>POST</code> request, I detected a parameter called <strong>roleid=</strong>, most likely responsible for user privileges. -></p>

<p><img src="./images/15.png" alt="15.png" /></p>

<p>Moreover, I switched the parameter 0 to 1 -></p>

<p><img src="./images/16.png" alt="16.png" /></p>

<p>However, I was looking for cookie parameter in order to grant my privileges on the application. -></p>

<p><img src="./images/17.png" alt="17.png" /></p>

<p>After an admin user generation, I hesitately logged as admin on <code>admin.php</code> -></p>

<p><img src="./images/18.png" alt="18.png" /></p>

<p>It looks like I found a credentials then I preferred this on <code>SSH</code> as credentials -></p>

<p><img src="./images/19.png" alt="19.png" /></p>

<p>It was not possible to authenticate as user <code>cry0l1t3</code> -></p>

<p><img src="./images/20.png" alt="20.png" /></p>

<p>What's more, I found a domain that was working on staging environment ->
<img src="./images/21.png" alt="21.png" /></p>

<p>I also added it on my <code>/etc/hosts</code> file ->
<img src="./images/22.png" alt="22.png" /></p>

<p>Now, after I reached target domain, I encountered with a error output corresponding system sensitive php scripts and mysql database credentials -></p>

<p><img src="./images/23.png" alt="23.png" /></p>

<p>In addition to the these information disclosures, I discovered admin use of the server ->
<img src="./images/24.png" alt="24.png" /></p>

<p>Let's dump the <strong>administrator user credentials</strong> from DB &amp; start post exploitation phase:</p>

<p>Using this juicy resource to understand how we can interact with mysql client ? -></p>

<p>https://www.bytebase.com/reference/mysql/how-to/top-mysql-commands-with-examples/</p>

<p>Due to my previous <code>rustscan</code> result, instead of using port number as <code>3306</code> I wanted to use <code>33060</code> -></p>

<p><img src="./images/25.png" alt="25.png" /></p>

<p>Although I successfuly put necessary credentials to mysql client, I was not able to connect DB -></p>

<p><img src="./images/26.png" alt="26.png" /></p>

<p>Then I asked <code>Laravel</code> to <code>searchsploit</code> to find useful vulnerabilities -></p>

<p><img src="./images/29.png" alt="29.png" /></p>

<p>I solely knew that application envionment app key was leaked ,so there should be a way to use it.</p>

<p><code>dBLUaMuZz7Iq06XtL/Xnz/90Ejq+DEEynggqubHWFj0=</code></p>

<p><code>Whatweb</code> could not get <code>PHP</code> version information or framework information. Besides, <code>Wappalyzer</code> also did not too. Therefore, I also used to retrieve version through <code>Burpsuite</code>. Moreover, Burpsuite could not find version number of PHP.</p>

<p><img src="./images/27.png" alt="27.png" /></p>

<p>I tried to authenticate DB ,yet it did not work. Finally, I googled the PHP + appkey combination -></p>

<p><img src="./images/28.png" alt="28.png" /></p>

<p>Gotcha  ! ! !</p>

<h2>Automated Exploitation</h2>

<p>Let's check PoC -></p>

<p><code>cat /usr/share/exploitdb/exploits/linux/remote/47129.rb</code></p>

<p>It looks like <code>Ruby</code> file, most common extension depicts a Metasploit Framework exploit. Then I deployed <code>msfconsole</code> -></p>

<pre><code>msfconsole
search Laravel
use 6
</code></pre>

<p><img src="./images/31.png" alt="31.png" /></p>

<p>then RUN:</p>

<p><img src="./images/30.png" alt="30.png" /></p>

<p>I wrongly set <code>APP_KEY</code> then removed base64 string from appkey. After that switched VHOST parameter as my virtual host <code>dev-staging-01.academy.htb</code>.
then I got shell via Metasploit Framework.</p>

<p><img src="./images/32.png" alt="32.png" /></p>

<h2>Manual Exploitation</h2>

<p>I wanted to use <code>manual exploitation</code> to force myself to prepare OSCP exam. On GitHub I found a manual exploit to get direct reverse shell -></p>

<p>https://github.com/aljavier/exploit<em>laravel</em>cve-2018-15133</p>

<p>Follow the steps that I provided so as to prepare exploit -></p>

<p><img src="./images/33.png" alt="33.png" /></p>

<p>Because of the recent updates made by OffSec, we were no longer use internal Python package management system. Therefore, I created virtual environment for the exploit -></p>

<p><img src="./images/34.png" alt="34.png" /></p>

<p>Once you run exploit, you will encounter an usage manual -></p>

<p><img src="./images/35.png" alt="35.png" /></p>

<p>I did not want to execute command instead I needed to get shell via exploit ,so I retrieved a command <code>--interactive</code> on the official GitHub page of exploit.</p>

<p><img src="./images/36.png" alt="36.png" /></p>

<p>Do not forget to give full URL -></p>

<p><img src="./images/37.png" alt="37.png" /></p>

<p>Now we got fully manual reverse shell via PoC exploit called <strong>exploit<em>laravel</em>cve-2018-15133</strong>.</p>

<p>After I got shell, I started to manually enumerate server via sending consecutive commands -></p>

<p><img src="./images/38.png" alt="38.png" /></p>

<p>Then I discovered sensitive files. That's why, let's check what kind of information that includes ?</p>

<p>Observe that I prompted the same file, where debugger renders on browser -></p>

<p><img src="./images/39.png" alt="39.png" /></p>

<p>I want to keep forward to binary exploitation whether it is possible or not. Hence, <code>linepas</code> would be suitable -></p>

<p>https://github.com/peass-ng/PEASS-ng/releases/tag/20250601-88c7a0f6</p>

<p>Deploy a <code>python web server</code> to transfer <code>linpeas</code> to target -></p>

<p><img src="./images/40.png" alt="40.png" /></p>

<p>It is clear that we have both <code>python3</code> and <code>curl</code> as binary in target server ->
<img src="./images/41.png" alt="41.png" /></p>

<p>Check for how to download files via <code>curl</code>:</p>

<p>https://www.digitalocean.com/community/tutorials/workflow-downloading-files-curl</p>

<p>I was not able to send it to the target. Let me try binary exploitation via python3 -></p>

<p>Again it did not work at all.</p>

<p><img src="./images/42.png" alt="42.png" /></p>

<p>Try manually read file paths repetitievly -></p>

<pre><code>cd ..; ls -al
cd ../..; ls -al
cd ../../academy; ls -al
cd ../../academy; cat .env
</code></pre>

<p>After this combination I found another application including different DB user:pass variation -></p>

<p><img src="./images/43.png" alt="43.png" /></p>

<p>Attempt authentication via <strong>mysql</strong> ->
<img src="./images/44.png" alt="44.png" /></p>

<p>It did not work ,but let me try also <code>SSH</code>:</p>

<p>Bingo ! ! !</p>

<p>Fuzzing approach worked for <code>cy0l1t3</code> user :)</p>

<p><img src="./images/45.png" alt="45.png" /></p>

<p>Capture <code>user.txt</code> flag from <code>/home/cry0l1t3</code> directory -></p>

<p><img src="./images/46.png" alt="46.png" /></p>

<p>Generally, you can use <code>temp</code> folder to run &amp; build script because most of the time this directory has privileges to do such tasks. That's why, I moved <code>tmp</code> folder then sent <code>linpeas.sh</code> -></p>

<p><img src="./images/47.png" alt="47.png" /></p>

<p>Wait for the <code>linpeas.sh</code> task to complete it enumerates all the kernel + OS ->
<img src="./images/48.png" alt="48.png" /></p>

<p>Kernel PoC exploit's occurence can be seen as below ->
<img src="./images/49.png" alt="49.png" /></p>

<p>I tried and abuse <code>Polkit</code> exploit ,yet it did not work on my instance -></p>

<p><img src="./images/50.png" alt="50.png" /></p>

<p>After further investigations, I discovered a credential looks like <code>mrb3n</code> user's credentials -></p>

<p><img src="./images/51.png" alt="51.png" /></p>

<p><strong>Cyberchef</strong> successfully identified the type of the data -></p>

<p><img src="./images/52.png" alt="52.png" /></p>

<p>YESS ! ! ! It worked.</p>

<p><img src="./images/53.png" alt="53.png" /></p>

<p>user <code>mrb3n</code> can run composer binary -></p>

<p><img src="./images/54.png" alt="54.png" /></p>

<p>Let's check <code>gftobins</code> -></p>

<p><img src="./images/55.png" alt="55.png" /></p>

<p><code>Composer binary exploitation</code> method worked clearly ! ! !</p>

<p><img src="./images/56.png" alt="56.png" /></p>

<p>Get <code>root.txt</code> flag from simply from <code>/root/</code> directory -></p>

<p><code>cat /root/root.txt</code></p>

<p><img src="./images/57.png" alt="57.png" /></p>

    </article>
</body>
</html>